<erag-table-layout [leftHeadColSize]="5" [rightHeadColSize]="7">
    <ng-container class="table-header-right-side">
         <select [(ngModel)]="headerControls.tenant" (ngModelChange)="onTenantChange()">
            <option *ngFor="let tenant of tenants" [ngValue]="tenant.id">{{tenant.name}}</option>
        </select>
    </ng-container>
    <ng-container class="table-body" *ngIf="userSessionList?.length; else noDataMessage">
        <ng-container>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>UserID</th>
                        <th>First Name</th>
                        <th>Last Name</th>
                        <th>Tenant</th>
                        <th>Force Session Log Off</th>
                    </tr>
                </thead>
                <tbody *ngFor="let item of userSessionList; trackBy: trackByFn">
                    <tr>
                        <td><a href="javascript:;" (click)="item.expanded=!item.expanded">{{item[0].end_user.ldapid}}</a></td>
                        <td>{{ item[0].end_user.firstname }}</td>
                        <td>{{ item[0].end_user.lastname }}</td>
                        <td>{{ item[0].tenant.name }}</td>
                        <td>
                            <a href="javascript:;" (click)="notifyKillSession(item)"><i class="fa fa-times killlink" aria-hidden="true"></i></a>
                        </td>
                    </tr>

                    <tr [hidden]="!item.expanded">
                        <td colspan="10">
                            <div class="span10">
                                <div>
                                    <table class="table table-striped bg-white">
                                        <thead>
                                            <tr>
                                                <th>OS</th>
                                                <th>Last Login</th>
                                                <th>Session Validity</th>
                                                <th>Cookie Value</th>
                                                <th>IP</th>
                                                <th>Cert DN</th>
                                                <th>Log Off</th>
                                            </tr>
                                            <tr *ngFor="let sessonDetails of item; trackBy: trackByFn">

                                                <td>{{ sessonDetails.details.operating_system }}</td>
                                                <td>{{ sessonDetails.last_loggedin| date:'yyyy-MM-dd HH:mm:ss' }}</td>
                                                <td>{{ sessonDetails.session_time | date:'yyyy-MM-dd HH:mm:ss'}}</td>
                                                <td>{{ sessonDetails.details.erag_cookie }}</td>
                                                <td>{{ sessonDetails.details.client_ip }}</td>
                                                <td>{{ sessonDetails.details.certificate_dn }}</td>
                                                <td>
                                                    <a href="javascript:;" (click)="notifyKillSession([sessonDetails])"><i class="fa fa-times killlink" aria-hidden="true"></i></a>
                                                </td>
                                            </tr>
                                        </thead>
                                    </table>
                                </div>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </ng-container>
    </ng-container>
    <ng-container class="table-footer-right-side" *ngIf="paginationControls.totalItems > paginationControls.itemsPerPage">
        <div class="pull-right">
            <erag-pagination [totalItems]="paginationControls.totalItems" [itemsPerPage]="paginationControls.itemsPerPage" (pageChange)="onPageChange($event)">

            </erag-pagination>
        </div>
        <div class="pull-right">
            <erad-dropdown direction="dropup" icon="arrow-circle-up" width="66px" [tenants]="paginationChoiceList" [selectedTenant]="paginationChoiceList[1]"
                [show]="showPaginationDropdown" (select)="onPaginationDropdownSelected($event)" (toggle)="onPaginationDropdownToggle()">
            </erad-dropdown>
        </div>
    </ng-container>
</erag-table-layout>
<ng-template #noDataMessage>
    <div class="text-center message">
        <strong>No Active Sessions</strong>
    </div>
</ng-template>